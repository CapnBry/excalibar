===============================================================================
                               Excalibur
         A real-time packet sniffer / analzyer for Dark Age of Camelot
===============================================================================
Homepage: http://excalibar.sourceforge.net/
Development: http://sourceforge.net/projects/excalibar/

===============
READ THIS FIRST
===============

If you fail to follow these simple installation instructions
TO THE LETTER, and then come whining on the boards or channels, expect to
be publicly ridiculed.

===================
System Requirements
===================

These are the general system requirements for the machine running EX.
These requirements assume that the machine isn't doing anything else, if
it is, adjust as required.

- Pentium 233Mhz
- SVGA Graphics card with at least 512 KiB memory, supported by your
- A recent UNIX release.. (i.e. Linux, Solaris, BSD or IRIX)
- 64 MB Main Memory
- 256 MB Virtual Memory
- 750 MB free HD space (550 of which is for X11 / QT 3.0.4)

============================
Verifying your network setup
============================

You need to set up a sniffing environment. How to do that is
beyond the scope of this simple INSTALL file, but look around the
net; there are many guides.
To verify that your sniffing setup is correct, run the following command
on your would-be EX box WHILE playing DAoC:

tcpdump -n host <IP of your Windows Machine playing DAoC>

You should (hopefully) see two-way traffic, that is traffic both to AND
from your windows machine. If you don't, you don't have a sniffing
setup, and you should fix that first.

===============================
Checking your UNIX distribution
===============================

You absolutely, 100% sure, without a doubt need:
- A recent version of X11
- A copy of gcc 2.95, 2.96, or 3.0.3+
- An OpenGL impementation. Mesa will do fine.
- Libpcap. A version recent enough that it handles the cooked-mode "any" device.
- QT X11 Free version 3.0.1+

Prequsite packages for Mandrake 8.2
-----------------------------------
This is the distribution of choice for one of the developers (teerex). 
To begin with, you'll need a working X server and all of it's requisite
packages.  If you've installed KDE or GNOME as part of your install, you
most likely have a good base.  In addition, you'll need the following 
packages from your distro CDs to build Excalibur:

  glibc-devel
  gcc-2.96
  gcc-cpp-2.96
  gcc-c++-2.96
  libpcap
  libpcap-devel
  Mesa
  Mesa-common
  Mesa-common-devel
  XFree86-devel
  
In addition, if you want to skip building qt 3, grab the qt3 packages from
ftp://ftp.kde.org/pub/kde/stable/3.0/Mandrake/8.2/RPMS/i586/ or your 
friendly local kde mirror:

  libqt3
  libqt3-devel

Installing under RedHat 7.2
---------------------------
This documentation is written with RH 7.2 in mind as the build platform..
If you installed RH 7.2 with "everything", the only thing you need to
update is QT to 3.0.1 or greater (instructions below).

If you did not install "everything" send us a list of packages you needed
to install and we will update this documentation.

Prerequisite packages for Debian UNSTABLE
-----------------------------------------
  build-essential
  binutils
  task-c++-dev
  libpcap
  libpcap-dev
  libpng2
  libpng2-dev
  libqt3-mt
  libqt3-mt-dev
  qt3-tools
  xlibmesa3
  xlibmesa-dev
  zlib1g
  zlib1g-dev

  And make sure you have an X11 client configured (so you can actually
  see Excalibur when you run it!))
  
================
Become superuser
================

If you're not already root, type "su" and fill in the superuser password
at the prompt.

===================
Installing QT 3.0.4
===================

Please follow these steps to the letter. If you don't, and it doesn't work,
don't clutter the message boards or the developer's mailboxes with messages.
If you've installed libqt3 and libqt3-devel, you can skip this step.

1) Remove any vendor-supplied version of QT3
   For RedHat this is:
     rpm -e $(rpm -qa | grep -i qt3)
     cd /usr/lib
     rm -rf qt-3.0.0

2) cd /usr/lib/
3) ncftpget ftp://ftp.trolltech.com/qt/source/qt-x11-free-3.0.4.tar.gz
4) tar xvvfz qt-x11-free-3.0.4.tar.gz
5) mv qt-x11-free-3.0.4 qt-3.0.4
6) rm qt-x11-free-3.0.4.tar.gz
7) cd qt-3.0.4
8) export QTDIR=$(pwd)
9) ./configure -thread
10) make

Make will take several hours. It's supposed to, so don't panic.

===================================
Downloading and compiling Excalibur
===================================

1) cd ~
2) cvs -z9 -d:pserver:anonymous@cvs.excalibar.sourceforge.net:/cvsroot/excalibar co excalibur
3) export QTDIR=/usr/lib/qt-3.0.4
4) cd excalibur
5) $QTDIR/bin/qmake excalibur.pro
6) make

=================
Running Excalibur
=================

1) cd ~/excalibur
2) ifconfig eth0 promisc     # Replace eth0 with whatever card you normally use
3) ./excalibur

The program will display a few lines, but nothing else will happen.
==> This is as it should be. <==

Go to your windows machine and log on DAoC. You must not start the DAoC
Client before you start Excalibur, or you will get nothing!

The first time the window opens, you probably want to go to the "Settings"
menu and customize your configuration options.. There are numerous options
to be configured, I won't go into detail here.

==================
Running the Editor
==================

The editor is a standalone Java program. You need at least JDK 1.3
to run it, but 1.4 or better is encouraged.

To see your java version, type:

java -version

To run the editor, make sure you have java installed (http://java.sun.com)
and type:

java -jar editor.jar


To get the editor to link to EX, you need to start EX like this:

./excalibur --link

When you connect to DAoC, the port number the editor needs will be show in
the window title of EX.
